!function(){var t=location.search.split("?")[1],a="https://mosquitokiller.csie.ncku.edu.tw/apis/counts?formatBy=hour&lampHashID="+t+"&limit=7",e="https://mosquitokiller.csie.ncku.edu.tw/apis/lamps/"+t+"?key=hash",o="https://mosquitokiller.csie.ncku.edu.tw/apis/counts?formatBy=date&lampHashID="+t+"&limit=1",s="https://mosquitokiller.csie.ncku.edu.tw/apis/counts?lampHashID="+t+"&limit=1";$.ajax({type:"get",url:a,crossDomain:!0,contentType:"application/json",success:function(t){var a=[],e=[],o=1;for(var s in t){for(var n=2;n<25;n+=2)t[s].hasOwnProperty(n)&&t[s].hasOwnProperty(n-1)?a.push({value:+(t[s][n].sum+t[s][n].sum),date:s.replace("2017-",""),day:+o,hour:+n}):a.push({value:0,date:s.replace("2017-",""),day:+o,hour:+n});o++,e.push(s.replace("2017-",""))}drawDayLable(e),heatmapChart(a)},error:function(t){console.log(t)}});$.ajax({type:"get",url:e,crossDomain:!0,contentType:"application/json",success:function(a){console.log(a),a.id=t,initMap(a)},fail:function(t){console.log(t)}}),$.ajax({type:"get",url:o,crossDomain:!0,contentType:"application/json",success:function(a){var e=new Date;e.setDate(e.getDate()-1),$("#yesterdayData").text(a[e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()][t].sum)},fail:function(t){console.log(t)}}),$.ajax({type:"get",url:s,crossDomain:!0,contentType:"application/json",success:function(t){$("#lastDate").text(t[0].created_at.replace(/T\S*/g,""))},fail:function(t){console.log(t)}})}();